package org.xito.dcf.property.editor;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.border.*;
import javax.swing.colorchooser.*;

public class ChooserComboPopup extends JPopupMenu
{
  ColorEditor ce;
  
  public ChooserComboPopup(ColorEditor c)
  {
    super();
    this.ce = c;
    JPanel p = new JPanel();
    p.setLayout(new BorderLayout());
    SwatchChooserPanel s = new SwatchChooserPanel(c,this);
    s.buildChooser();
    p.add(s,BorderLayout.NORTH);
    JButton b = new JButton("Other ...");
    b.addActionListener(new ActionListener()
    {
      public void actionPerformed(ActionEvent e)
      {
        Color color = null;
        color = JColorChooser.showDialog(getParent(), "Color Chooser", color);
        getCE().setValue(color);
        // XXX: update the recentSwatch
        setVisible(false);
      }
    });
    p.add(b, BorderLayout.SOUTH); // , BorderLayout.SOUTH);
    add(p);
    addMouseListener(new PopupListener());
  }
  
  public ColorEditor getCE()
  {
    return this.ce;
  }
  
  class PopupListener extends MouseAdapter
  {
    public void mousePressed(MouseEvent e)
    {
    }
    
    public void mouseReleased(MouseEvent e)
    {
      setVisible(false);
    }
  }
  
}
